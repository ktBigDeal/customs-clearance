# Railway ì›¹ì‚¬ì´íŠ¸ ë°°í¬ ê°€ì´ë“œ

Railway.app ì›¹ì‚¬ì´íŠ¸ë¥¼ í†µí•´ í†µê´€ ì‹œìŠ¤í…œì„ ë°°í¬í•˜ëŠ” ì™„ì „ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [Railway ê³„ì • ì„¤ì • ë° í”„ë¡œì íŠ¸ ìƒì„±](#railway-ê³„ì •-ì„¤ì •-ë°-í”„ë¡œì íŠ¸-ìƒì„±)
2. [GitHub ì—°ë™ ì„¤ì •](#github-ì—°ë™-ì„¤ì •)
3. [ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì¶”ê°€](#ë°ì´í„°ë² ì´ìŠ¤-ì„œë¹„ìŠ¤-ì¶”ê°€)
4. [ë°±ì—”ë“œ ë° AI ì„œë¹„ìŠ¤ ë°°í¬](#ë°±ì—”ë“œ-ë°-ai-ì„œë¹„ìŠ¤-ë°°í¬)
5. [í™˜ê²½ë³€ìˆ˜ ì„¤ì •](#í™˜ê²½ë³€ìˆ˜-ì„¤ì •)
6. [ì„œë¹„ìŠ¤ ê°„ ì—°ê²° ì„¤ì •](#ì„œë¹„ìŠ¤-ê°„-ì—°ê²°-ì„¤ì •)
7. [ë„ë©”ì¸ ë° ë„¤íŠ¸ì›Œí‚¹](#ë„ë©”ì¸-ë°-ë„¤íŠ¸ì›Œí‚¹)
8. [ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…](#ëª¨ë‹ˆí„°ë§-ë°-ë””ë²„ê¹…)

## ğŸš€ Railway ê³„ì • ì„¤ì • ë° í”„ë¡œì íŠ¸ ìƒì„±

### 1ë‹¨ê³„: Railway ê³„ì • ìƒì„±

1. **Railway ì›¹ì‚¬ì´íŠ¸ ë°©ë¬¸**
   - ğŸ”— https://railway.app ì ‘ì†
   - **"Start a New Project"** ë˜ëŠ” **"Login"** í´ë¦­

2. **GitHubë¡œ íšŒì›ê°€ì…/ë¡œê·¸ì¸**
   - "Continue with GitHub" ì„ íƒ
   - GitHub ê³„ì •ìœ¼ë¡œ ì¸ì¦ ì™„ë£Œ
   - Repository ì ‘ê·¼ ê¶Œí•œ í—ˆìš©

3. **ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±**
   - Dashboardì—ì„œ **"New Project"** í´ë¦­
   - í”„ë¡œì íŠ¸ ì´ë¦„: `customs-clearance-system` ì…ë ¥

## ğŸ“ GitHub ì—°ë™ ì„¤ì •

### 2ë‹¨ê³„: Repository ì—°ê²°

1. **í”„ë¡œì íŠ¸ ìƒì„± ë°©ì‹ ì„ íƒ**
   - **"Deploy from GitHub repo"** ì„ íƒ

2. **Repository ì„ íƒ**
   - `customs-clearance` repository ê²€ìƒ‰ ë° ì„ íƒ
   - **"Deploy Now"** í´ë¦­

3. **Root ë””ë ‰í† ë¦¬ ì„¤ì •**
   - Railwayê°€ ìë™ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìŠ¤ìº”í•©ë‹ˆë‹¤
   - ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ ê°ì§€ë˜ë©´ ê°ê° ê°œë³„ì ìœ¼ë¡œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì¶”ê°€

### 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

1. **MySQL ì¶”ê°€**
   - í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì—ì„œ **"+ New"** í´ë¦­
   - **"Database"** â†’ **"Add MySQL"** ì„ íƒ
   - ì„œë¹„ìŠ¤ ì´ë¦„: `customs-mysql`

2. **PostgreSQL ì¶”ê°€ (ì±—ë´‡ìš©)**
   - **"+ New"** â†’ **"Database"** â†’ **"Add PostgreSQL"**
   - ì„œë¹„ìŠ¤ ì´ë¦„: `customs-postgres`

3. **Redis ì¶”ê°€ (ìºì‹œìš©)**
   - **"+ New"** â†’ **"Database"** â†’ **"Add Redis"**
   - ì„œë¹„ìŠ¤ ì´ë¦„: `customs-redis`

### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

**MySQL ì„¤ì •:**
1. MySQL ì„œë¹„ìŠ¤ í´ë¦­ â†’ **"Connect"** íƒ­ â†’ **"MySQL CLI"** ì‹¤í–‰
2. ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰:
```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ë° ì‚¬ìš©ì ìƒì„±
CREATE DATABASE IF NOT EXISTS customs_clearance;
CREATE USER IF NOT EXISTS 'customs_user'@'%' IDENTIFIED BY 'customs_pass';
GRANT ALL PRIVILEGES ON customs_clearance.* TO 'customs_user'@'%';
FLUSH PRIVILEGES;
USE customs_clearance;

-- í…Œì´ë¸” ìƒì„± (data-tier/mysql/init/01-schema.sql ë‚´ìš© ë³µì‚¬)
-- ìƒ˜í”Œ ë°ì´í„° ì‚½ì… (data-tier/mysql/init/02-seed-data.sql ë‚´ìš© ë³µì‚¬)
```

**PostgreSQL ì„¤ì •:**
1. PostgreSQL ì„œë¹„ìŠ¤ í´ë¦­ â†’ **"Connect"** íƒ­ â†’ **"psql"** ì‹¤í–‰
2. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±:
```sql
CREATE DATABASE conversations;
```

## ğŸš€ ë°±ì—”ë“œ ë° AI ì„œë¹„ìŠ¤ ë°°í¬

### 4ë‹¨ê³„: Spring Boot ë°±ì—”ë“œ ë°°í¬

1. **ìƒˆ ì„œë¹„ìŠ¤ ì¶”ê°€**
   - **"+ New"** â†’ **"GitHub Repo"** â†’ `customs-clearance` ì„ íƒ
   - **"Deploy"** í´ë¦­

2. **Root Directory ì„¤ì •**
   - Service Settings â†’ **"Source"** íƒ­
   - **"Root Directory"**: `presentation-tier/backend` ì…ë ¥
   - **"Deploy"** í´ë¦­

3. **ì„œë¹„ìŠ¤ ì´ë¦„ ë³€ê²½**
   - Service Settings â†’ **"General"** íƒ­
   - Service Name: `customs-backend` ì…ë ¥

### 5ë‹¨ê³„: AI Gateway ë°°í¬

1. **ìƒˆ ì„œë¹„ìŠ¤ ì¶”ê°€**
   - **"+ New"** â†’ **"GitHub Repo"** â†’ `customs-clearance` ì„ íƒ

2. **Root Directory ì„¤ì •**
   - Root Directory: `application-tier/ai-gateway`
   - Service Name: `customs-ai-gateway`

### 6ë‹¨ê³„: AI ëª¨ë¸ ì„œë¹„ìŠ¤ë“¤ ë°°í¬

ê° ì„œë¹„ìŠ¤ë§ˆë‹¤ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°°í¬:

1. **Chatbot FastAPI ì„œë¹„ìŠ¤**
   - Root Directory: `application-tier/models/model-chatbot-fastapi`
   - Service Name: `customs-chatbot-fastapi`

2. **OCR ì„œë¹„ìŠ¤**
   - Root Directory: `application-tier/models/model-ocr`
   - Service Name: `customs-ocr`

3. **Report ì„œë¹„ìŠ¤**
   - Root Directory: `application-tier/models/model-report`
   - Service Name: `customs-report`

4. **HS Code ì„œë¹„ìŠ¤**
   - Root Directory: `application-tier/models/model-hscode`
   - Service Name: `customs-hscode`

## ğŸ”§ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

### 7ë‹¨ê³„: ê° ì„œë¹„ìŠ¤ë³„ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

ê° ì„œë¹„ìŠ¤ì˜ **"Variables"** íƒ­ì—ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

### ê³µí†µ í™˜ê²½ë³€ìˆ˜

**ëª¨ë“  ì„œë¹„ìŠ¤ì— ì„¤ì •:**
```env
OPENAI_API_KEY=sk-your-openai-api-key-here
ENVIRONMENT=production
```

### Backend (Spring Boot) í™˜ê²½ë³€ìˆ˜

**customs-backend ì„œë¹„ìŠ¤:**
```env
# Spring ì„¤ì •
SPRING_PROFILES_ACTIVE=production
PORT=8080

# JWT ë³´ì•ˆ
JWT_SECRET=your-very-long-and-secure-jwt-secret-key-256-bits-minimum

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Railway ìë™ ìƒì„±)
SPRING_DATASOURCE_URL=${{customs-mysql.DATABASE_URL}}
SPRING_DATASOURCE_USERNAME=${{customs-mysql.MYSQL_USER}}
SPRING_DATASOURCE_PASSWORD=${{customs-mysql.MYSQL_PASSWORD}}

# JVM ìµœì í™”
JAVA_OPTS=-Xmx512m -XX:+UseContainerSupport -XX:+UseG1GC
```

### AI Gateway í™˜ê²½ë³€ìˆ˜

**customs-ai-gateway ì„œë¹„ìŠ¤:**
```env
PORT=8000
ENVIRONMENT=production

# AI ì„œë¹„ìŠ¤ ì—°ê²° (ë‚´ë¶€ URL ì‚¬ìš©)
MODEL_CHATBOT_URL=https://${{customs-chatbot-fastapi.RAILWAY_PUBLIC_DOMAIN}}
MODEL_OCR_URL=https://${{customs-ocr.RAILWAY_PUBLIC_DOMAIN}}
MODEL_REPORT_URL=https://${{customs-report.RAILWAY_PUBLIC_DOMAIN}}
MODEL_HSCODE_URL=https://${{customs-hscode.RAILWAY_PUBLIC_DOMAIN}}
```

### Chatbot FastAPI í™˜ê²½ë³€ìˆ˜

**customs-chatbot-fastapi ì„œë¹„ìŠ¤:**
```env
PORT=8000
ENVIRONMENT=production

# ChromaDB ì„¤ì •
CHROMADB_MODE=docker
CHROMADB_HOST=localhost
CHROMADB_PORT=8000

# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
DATABASE_URL=${{customs-postgres.DATABASE_URL}}
REDIS_URL=${{customs-redis.REDIS_URL}}
```

### OCR ì„œë¹„ìŠ¤ í™˜ê²½ë³€ìˆ˜

**customs-ocr ì„œë¹„ìŠ¤:**
```env
PORT=8001
ENVIRONMENT=production

# Azure OCR ì„¤ì • (ì„ íƒì‚¬í•­)
AZURE_FORM_RECOGNIZER_ENDPOINT=your-azure-endpoint
AZURE_FORM_RECOGNIZER_KEY=your-azure-key
```

### Report ì„œë¹„ìŠ¤ í™˜ê²½ë³€ìˆ˜

**customs-report ì„œë¹„ìŠ¤:**
```env
PORT=8002
ENVIRONMENT=production
```

### HS Code ì„œë¹„ìŠ¤ í™˜ê²½ë³€ìˆ˜

**customs-hscode ì„œë¹„ìŠ¤:**
```env
PORT=8003
ENVIRONMENT=production
```

## ğŸ”— ì„œë¹„ìŠ¤ ê°„ ì—°ê²° ì„¤ì •

### 8ë‹¨ê³„: Railway ì„œë¹„ìŠ¤ ì°¸ì¡° ì„¤ì •

Railwayì—ì„œ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ ìœ„í•´ ë‚´ë¶€ URLì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **ì„œë¹„ìŠ¤ URL í™•ì¸**
   - ê° ì„œë¹„ìŠ¤ì˜ **"Settings"** â†’ **"Domains"** íƒ­ì—ì„œ Public Domain í™•ì¸

2. **ë‚´ë¶€ í†µì‹  URL ì„¤ì •**
   ```env
   # AI Gatewayì—ì„œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ
   MODEL_CHATBOT_URL=https://customs-chatbot-fastapi-production-a1b2c3.up.railway.app
   MODEL_OCR_URL=https://customs-ocr-production-d4e5f6.up.railway.app
   MODEL_REPORT_URL=https://customs-report-production-g7h8i9.up.railway.app
   MODEL_HSCODE_URL=https://customs-hscode-production-j1k2l3.up.railway.app
   ```

## ğŸŒ ë„ë©”ì¸ ë° ë„¤íŠ¸ì›Œí‚¹

### 9ë‹¨ê³„: ë„ë©”ì¸ ì„¤ì •

1. **ìë™ ìƒì„±ëœ ë„ë©”ì¸ í™•ì¸**
   - ê° ì„œë¹„ìŠ¤ëŠ” ìë™ìœ¼ë¡œ `https://service-name-production-xxxxx.up.railway.app` í˜•íƒœì˜ ë„ë©”ì¸ì„ ë°›ìŠµë‹ˆë‹¤

2. **ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì„¤ì • (ì„ íƒì‚¬í•­)**
   - Service Settings â†’ **"Domains"** íƒ­
   - **"Custom Domain"** í´ë¦­í•˜ì—¬ ì›í•˜ëŠ” ë„ë©”ì¸ ì¶”ê°€

3. **ì£¼ìš” ì„œë¹„ìŠ¤ URL**
   ```
   Backend API: https://customs-backend-production.up.railway.app
   AI Gateway: https://customs-ai-gateway-production.up.railway.app
   Chatbot API: https://customs-chatbot-fastapi-production.up.railway.app
   ```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…

### 10ë‹¨ê³„: ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§ ì„¤ì •

1. **ë¡œê·¸ í™•ì¸**
   - ê° ì„œë¹„ìŠ¤ í´ë¦­ â†’ **"Deployments"** íƒ­ â†’ ìµœì‹  ë°°í¬ì˜ **"View Logs"**

2. **ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§**
   - **"Observability"** íƒ­ì—ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸

3. **ë©”íŠ¸ë¦­ í™•ì¸**
   - **"Metrics"** íƒ­ì—ì„œ CPU, ë©”ëª¨ë¦¬, ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

### ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

1. **ë¹Œë“œ ì‹¤íŒ¨ì‹œ**
   - Logsì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
   - Dockerfileì´ë‚˜ ë¹Œë“œ ì„¤ì • ìˆ˜ì •

2. **ë©”ëª¨ë¦¬ ë¶€ì¡±ì‹œ**
   - Service Settings â†’ **"Resources"** íƒ­ì—ì„œ ë©”ëª¨ë¦¬ í• ë‹¹ëŸ‰ ì¦ê°€

3. **í™˜ê²½ë³€ìˆ˜ ëˆ„ë½ì‹œ**
   - **"Variables"** íƒ­ì—ì„œ í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ì¶”ê°€

## âœ… ë°°í¬ ê²€ì¦

### 11ë‹¨ê³„: ì„œë¹„ìŠ¤ ë™ì‘ í™•ì¸

1. **í—¬ìŠ¤ì²´í¬ í™•ì¸**
   ```
   Backend: https://your-backend-domain.up.railway.app/api/v1/health
   AI Gateway: https://your-gateway-domain.up.railway.app/health
   ê° AI ì„œë¹„ìŠ¤: https://your-service-domain.up.railway.app/health
   ```

2. **API ë¬¸ì„œ í™•ì¸**
   ```
   Backend Swagger: https://your-backend-domain.up.railway.app/swagger-ui/index.html
   AI Gateway Docs: https://your-gateway-domain.up.railway.app/docs
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸**
   - ê° ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ì˜ Connect íƒ­ì—ì„œ ì—°ê²° ìƒíƒœ í™•ì¸

## ğŸ¯ ë°°í¬ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Railway ê³„ì • ìƒì„± ë° GitHub ì—°ë™
- [ ] í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] MySQL, PostgreSQL, Redis ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€
- [ ] Backend (Spring Boot) ì„œë¹„ìŠ¤ ë°°í¬
- [ ] AI Gateway ì„œë¹„ìŠ¤ ë°°í¬
- [ ] AI ëª¨ë¸ ì„œë¹„ìŠ¤ë“¤ (Chatbot, OCR, Report, HSCode) ë°°í¬
- [ ] ëª¨ë“  ì„œë¹„ìŠ¤ì˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
- [ ] ì„œë¹„ìŠ¤ ê°„ URL ì—°ê²° ì„¤ì •
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ
- [ ] í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ ì •ìƒ ì‘ë‹µ
- [ ] API ë¬¸ì„œ ì ‘ê·¼ ê°€ëŠ¥
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì„¤ì •

## ğŸ”„ í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²°

**Vercel í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì—°ê²°í•  API URLs:**
```env
# Vercel í™˜ê²½ë³€ìˆ˜ì— ì¶”ê°€
NEXT_PUBLIC_API_BASE_URL=https://customs-backend-production.up.railway.app
NEXT_PUBLIC_AI_GATEWAY_URL=https://customs-ai-gateway-production.up.railway.app
NEXT_PUBLIC_CHATBOT_URL=https://customs-chatbot-fastapi-production.up.railway.app
```

---

**ğŸ‰ ë°°í¬ ì™„ë£Œ! ì´ì œ ì™„ì „í•œ í†µê´€ ì‹œìŠ¤í…œì´ Railwayì—ì„œ ìš´ì˜ë©ë‹ˆë‹¤.**

Railway ëŒ€ì‹œë³´ë“œì—ì„œ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.